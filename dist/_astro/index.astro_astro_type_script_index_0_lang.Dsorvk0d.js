import{g as n,S as d,T as o,E as s}from"./ScrollTrigger.DPnwV6YG.js";n.registerPlugin(d);class a{timeouts={resizeThrottle:null};hasSiteLoaded=!1;hasWorksReady=!1;introStarted=!1;windowWidth;windowHeight;clientWidth;clientHeight;isScrolling=!1;constructor(){let i="unknown";navigator.userAgent.indexOf("Win")!==-1?i="windows":navigator.userAgent.indexOf("Android")!==-1?i="android":navigator.userAgent.indexOf("Mac")!==-1?i="mac":navigator.userAgent.indexOf("Linux")!==-1&&(i="linux"),document.documentElement.classList.add(`is-${i}`);let t="unknown";navigator.userAgent.indexOf("Firefox")!==-1?t="firefox":navigator.userAgent.indexOf("Chrome")!==-1?t="chrome":navigator.userAgent.indexOf("Safari")!==-1&&(t="safari"),document.documentElement.classList.add(`is-${t}`),this.bindEvents()}init(){o.init(),this.onResize(),document.documentElement.classList.contains("is-works-ready")&&(this.hasWorksReady=!0),this.tryStartIntro()}bindEvents(){window.addEventListener("resize",this.resizeThrottle.bind(this)),window.addEventListener("scroll",this.onScroll.bind(this),{passive:!0}),s.on("updateViewport",this.onResize,this,!0),s.on("siteLoaded",this.onSiteLoaded,this,!0),s.on("worksReady",this.onWorksReady,this,!0);const i=new IntersectionObserver(t=>{t.forEach(e=>{e.target.dispatchEvent(new CustomEvent("intersect",{detail:{isIntersecting:e.isIntersecting}})),e.isIntersecting?(e.target.classList.add("is-in-view"),e.target.classList.remove("is-out-of-view","is-out-of-view-top","is-out-of-view-bottom")):(e.target.classList.remove("is-in-view"),e.target.classList.add("is-out-of-view"),e.target.classList.toggle("is-out-of-view-top",e.boundingClientRect.top<0),e.target.classList.toggle("is-out-of-view-bottom",e.boundingClientRect.top>0))})},{threshold:0});document.querySelectorAll("[data-intersect]").forEach(t=>{i.observe(t)}),document.readyState==="complete"?this.siteLoaded():window.addEventListener("load",this.siteLoaded.bind(this),{once:!0}),this.onScroll()}siteLoaded(){setTimeout(()=>{document.documentElement.classList.add("is-loaded"),s.emit("siteLoaded")},150)}onSiteLoaded(){this.hasSiteLoaded=!0,this.tryStartIntro()}onWorksReady(){this.hasWorksReady=!0,this.tryStartIntro()}tryStartIntro(){this.introStarted||!this.hasSiteLoaded||!this.hasWorksReady||(this.introStarted=!0,o.nextTick(this.intro,this))}resizeThrottle(){clearTimeout(this.timeouts.resizeThrottle),this.timeouts.resizeThrottle=setTimeout(()=>{o.nextTick(this.onResize,this)},200)}onResize(){const i=window.innerWidth;let t=!1;this.windowWidth!==i&&(this.windowWidth!==void 0&&(t=!0),this.windowWidth=i,this.clientWidth=document.body.clientWidth);const e=window.innerHeight;let r=!1;this.windowHeight!==e&&(this.windowHeight!==void 0&&(r=!0),this.windowHeight=e,this.clientHeight=document.body.clientHeight),window.safeWidth=i,window.safeHeight=e,window.maxScrollTop=document.body.scrollHeight-window.safeHeight,this.setScrollProgress(),s.emit("resize",t,r)}onScroll(){this.setScrollProgress(),o.nextTick(()=>{s.emit("scroll",window.scrollY)})}setScrollProgress(){window.scrollProgress=window.scrollY/window.maxScrollTop}intro(){const i=document.querySelector(".js-site-wrapper"),t=document.querySelector(".js-site-loader");t&&n.to(t,{opacity:0,duration:.25,onComplete:()=>{t.remove()}}),n.to(i,{opacity:1,duration:.3,onComplete:()=>{document.documentElement.classList.remove("is-scroll-blocked")}})}}const l=new a;l.init();
