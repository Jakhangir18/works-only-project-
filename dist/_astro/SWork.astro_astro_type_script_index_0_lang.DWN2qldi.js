import{g as I,S as T,T as C,E as $}from"./ScrollTrigger.DPnwV6YG.js";/*!
 * EasePack 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var p,M,z=function(){return p||typeof window<"u"&&(p=window.gsap)&&p.registerPlugin&&p},_=function(t,s){return!!(typeof t>"u"?s:t&&!~(t+"").indexOf("false"))},X=function(t){if(p=t||z(),p){M=p.registerEase;var s=p.parseEase(),e=function(l){return function(o){var i=.5+o/2;l.config=function(a){return l(2*(1-a)*a*i+a*a)}}},n;for(n in s)s[n].config||e(s[n]);M("slow",S),M("expoScale",q),M("rough",E);for(n in k)n!=="version"&&p.core.globals(n,k[n])}},W=function(t,s,e){t=Math.min(1,t||.7);var n=t<1?s||s===0?s:.7:0,h=(1-t)/2,l=h+t,o=_(e);return function(i){var a=i+(.5-i)*n;return i<h?o?1-(i=1-i/h)*i:a-(i=1-i/h)*i*i*i*a:i>l?o?i===1?0:1-(i=(i-l)/h)*i:a+(i-a)*(i=(i-l)/h)*i*i*i:o?1:a}},R=function(t,s,e){var n=Math.log(s/t),h=s-t;return e&&(e=p.parseEase(e)),function(l){return(t*Math.exp(n*(e?e(l):l))-t)/h}},L=function(t,s,e){this.t=t,this.v=s,e&&(this.next=e,e.prev=this,this.c=e.v-s,this.gap=e.t-t)},O=function(t){typeof t!="object"&&(t={points:+t||20});for(var s=t.taper||"none",e=[],n=0,h=(+t.points||20)|0,l=h,o=_(t.randomize,!0),i=_(t.clamp),a=p?p.parseEase(t.template):0,u=(+t.strength||1)*.4,r,c,g,f,m,w,b;--l>-1;)r=o?Math.random():1/h*l,c=a?a(r):r,s==="none"?g=u:s==="out"?(f=1-r,g=f*f*u):s==="in"?g=r*r*u:r<.5?(f=r*2,g=f*f*.5*u):(f=(1-r)*2,g=f*f*.5*u),o?c+=Math.random()*g-g*.5:l%2?c+=g*.5:c-=g*.5,i&&(c>1?c=1:c<0&&(c=0)),e[n++]={x:r,y:c};for(e.sort(function(x,d){return x.x-d.x}),w=new L(1,1,null),l=h;l--;)m=e[l],w=new L(m.x,m.y,w);return b=new L(0,0,w.t?w:w.next),function(x){var d=b;if(x>d.t){for(;d.next&&x>=d.t;)d=d.next;d=d.prev}else for(;d.prev&&x<=d.t;)d=d.prev;return b=d,d.v+(x-d.t)/d.gap*d.c}},S=W(.7);S.ease=S;S.config=W;var q=R(1,2);q.config=R;var E=O();E.ease=E;E.config=O;var k={SlowMo:S,RoughEase:E,ExpoScaleEase:q};for(var j in k)k[j].register=X,k[j].version="3.14.2";z()&&p.registerPlugin(S);I.registerPlugin(T,S);class B{el;container;ruler;scene;canvas;ctx;title;videos;mask;bounding;letters;works;points;tl;animationProgress;pointsProgress;last;scrollProgress;smoothScrollProgress;state;speed;isPaused;loadIsStarted;constructor(){this.el=document.querySelector(".s-work"),this.container=this.el.querySelector(".js-container"),this.ruler=this.el.querySelector(".js-ruler"),this.scene=this.container.querySelector(".js-scene"),this.canvas=this.container.querySelector(".js-canvas"),this.ctx=this.canvas.getContext("2d"),this.title=this.container.querySelector(".js-title"),this.videos=this.container.querySelectorAll("video"),this.mask={width:0,height:0,maxScale:1,lines:[],el:this.el.querySelector(".js-mask"),svg:this.el.querySelector(".js-mask-svg"),pathOuter:this.el.querySelector(".js-mask-path-outer"),pathInner:this.el.querySelector(".js-mask-path-inner"),pathLines:this.el.querySelector(".js-mask-path-lines")},this.letters=[],this.title.querySelectorAll(".js-letter").forEach(t=>{const s={el:t,ghosts:[]};this.letters.push(s)}),this.works=[],this.container.querySelectorAll(".js-work").forEach(t=>{const s={el:t};this.works.push(s)}),this.points=[],this.scrollProgress=0,this.smoothScrollProgress=0,this.last={animationProgress:0,pointsProgress:0},this.isPaused=!0,this.loadIsStarted=!1,document.readyState==="complete"?C.nextTick(this.init,this):$.once("siteLoaded",this.init,this)}init(){this.setCtxStyle(),this.setSize(),this.setMask(),this.setPoints(),this.setLetters(),this.setWorks(),this.setTimeline(),this.bindEvents()}bindEvents(){$.on("contrastchange",this.setCtxStyle,this),$.on("resize",this.onResize,this),this.el.addEventListener("intersect",this.onIntersect.bind(this),{passive:!0})}onResize(t){t&&(this.setCtxStyle(),this.setSize(),this.setMask(),this.setPoints(),this.setLetters(),this.setWorks(),this.setTimeline())}onIntersect(t){this.isPaused=!t.detail.isIntersecting,this.isPaused?$.off("tick",this.tick,this):$.on("tick",this.tick,this),this.loadIsStarted||(this.loadNextVideo(),this.loadIsStarted=!0)}setCtxStyle(){const t=getComputedStyle(this.el).getPropertyValue("--color-primary");C.nextTick(()=>{this.ctx.strokeStyle=t})}setSize(){this.el.style.setProperty("--height",this.works.length*50+"lvh");const t=this.container.getBoundingClientRect();this.bounding={left:t.left,top:t.top,width:window.safeWidth,height:window.safeHeight},this.canvas.width=this.bounding.width,this.canvas.height=this.bounding.height,this.speed=Math.hypot(this.bounding.width,this.bounding.height)*4}setMask(){const{mask:t}=this,s=t.el.clientWidth,e=t.el.clientHeight;t.width=s,t.height=e,t.svg.style.width=t.width+"px",t.svg.style.height=t.height+"px";const n=this.el.getBoundingClientRect(),h=this.ruler.getBoundingClientRect(),l=h.width,o=h.height,i=h.left-n.left,a=h.top-n.top,u=`M -1 0 L ${s+2} 0 L ${s+2} ${e} L -1 ${e} Z`,r={tl:{x:i,y:a},tr:{x:i+l,y:a},br:{x:i+l,y:a+o},bl:{x:i,y:a+o}};let c=(r.tr.x-r.tl.x)/2;t.maxScale=window.safeWidth/c;let g=`M ${r.tl.x} ${r.tl.y+c} A ${c} ${c} 0 0 1 ${r.tr.x} ${r.tr.y+c} L ${r.br.x} ${r.br.y-c} A ${c} ${c} 0 0 1 ${r.bl.x} ${r.bl.y-c} Z`;const f=`${u} ${g}`;t.pathOuter.setAttribute("d",`${u} ${g}`);const m=window.safeWidth>767?16:8;r.tl.x+=m,r.tl.y+=m,r.tr.x-=m,r.tr.y+=m,r.br.x-=m,r.br.y-=m,r.bl.x+=m,r.bl.y-=m,c=(r.tr.x-r.tl.x)/2,g=`M ${r.tl.x} ${r.tl.y+c} A ${c} ${c} 0 0 1 ${r.tr.x} ${r.tr.y+c} L ${r.br.x} ${r.br.y-c} A ${c} ${c} 0 0 1 ${r.bl.x} ${r.bl.y-c} Z`,t.pathInner.setAttribute("d",`${u} ${g}`),t.lines=[];const w=window.safeWidth>767?12:8,b=s/w,x=e*.1,d=Math.ceil(e/x);for(let y=1;y<w;y++){const v=b*y;t.lines.push({p1:{x:v,y:0},p2:{x:v,y:e}})}for(let y=0;y<d;y++){const v=x*y;t.lines.push({p1:{x:0,y:v},p2:{x:s,y:v}})}let A="";t.lines.forEach(y=>{A+=`M ${y.p1.x} ${y.p1.y} L ${y.p2.x} ${y.p2.y} `}),t.pathLines.setAttribute("d",A),t.pathLines.style.clipPath=`path(evenodd, '${f}')`}setLetters(){const{letters:t,scene:s}=this;t.forEach((e,n)=>{e.ghosts.forEach(o=>{o.el.remove()}),e.ghosts=[];const h=e.el.getBoundingClientRect();e.width=h.width,e.height=h.height,e.top=h.top-this.bounding.top,e.left=h.left,e.freq=1+Math.random();const l=window.safeWidth>767?.75:.5;e.total=Math.round(this.bounding.width/e.width*l)+2;for(let o=0;o<e.total;o++){const i=document.createElement("span");i.classList.add("s__scene__letter"),i.classList.add("js-letter"),i.innerText=e.el.innerText,i.dataset.letter=e.el.innerText,s.appendChild(i);const a={el:i,x:e.left,y:e.top,z:Math.random()*100,i:o-e.total*.5,p:(o/e.total-.5)*2,ap:Math.abs(o/e.total-.5)*2,mx:0,my:0};i.style.top=a.y+"px",i.style.left=a.x+"px",i.style.zIndex=String(n!==1&&n!==2&&(n+t.length+o)%5===0?3:1),i.style.setProperty("--ix",String(a.i)),i.style.setProperty("--iy",String(((n+1)/(t.length+1)-.5)*2)),i.style.setProperty("--ap",String(a.ap)),i.style.setProperty("--p",String(a.p)),e.ghosts.push(a)}})}setWorks(){const{works:t}=this;t.forEach((s,e)=>{const n=s.el;n.style.setProperty("--size",String(.5+Math.random()*.5)),n.style.setProperty("--y",String((.5+Math.random()*.5)*(e%2?-1:1)))})}setTimeline(){const{el:t,container:s,works:e,scene:n,mask:h}=this,l=e.map(i=>i.el);let{tl:o}=this;o&&o.kill(),o=I.timeline({scrollTrigger:{trigger:t,start:"top 25%",end:"bottom 75%",scrub:1},onUpdate:()=>{n.style.setProperty("--state",String(this.state))}}),o.fromTo(h.el,{scale:1},{scale:h.maxScale,duration:.75,ease:"power4.in"},0),o.fromTo(n,{scale:.75},{scale:1,duration:.75,ease:"power3.in"},0),o.fromTo(s,{clipPath:"inset(0 1rem)"},{clipPath:"inset(0 0rem)",duration:.75,ease:"power3.in"},0),o.fromTo(this,{pointsProgress:0},{pointsProgress:1,duration:1,ease:"power4.inOut"},0),o.fromTo(this,{state:0},{state:1,duration:.75,ease:"power4.in"},0),o.fromTo(l,{attr:{progress:1}},{attr:{progress:-1},ease:"slow(0.15, 0.6)",stagger:.25},.75),o.fromTo(this,{animationProgress:0},{animationProgress:1e4,duration:o.totalDuration(),ease:"power1.out"},.75),o.fromTo(this,{state:1},{state:0,duration:.75,ease:"power4.inOut",immediateRender:!1},"-=1"),o.fromTo(h.el,{scale:h.maxScale},{scale:1,duration:.75,ease:"power4.inOut",immediateRender:!1},"-=1"),o.fromTo(n,{scale:1},{scale:.75,duration:.75,ease:"power3.inOut",immediateRender:!1},"-=1"),o.fromTo(s,{clipPath:"inset(0 0rem)"},{clipPath:"inset(0 1rem)",duration:.75,ease:"power3.inOut",immediateRender:!1},"-=1"),o.fromTo(this,{pointsProgress:1},{pointsProgress:0,duration:1,ease:"power4.inOut"},"-=1")}loadNextVideo(){const t=Array.from(this.videos).find(s=>!s.classList.contains("is-loaded"));t&&(t.readyState>=3?this.videoLoaded(t):(t.addEventListener("canplaythrough",()=>{this.videoLoaded(t)},{once:!0}),t.setAttribute("src",t.getAttribute("data-src")),t.load()))}videoLoaded(t){t.classList.add("is-loaded"),this.loadNextVideo()}moveLetters(){const{speed:t,letters:s,animationProgress:e}=this;s.forEach((n,h)=>{const l=t*n.freq;n.ghosts.forEach((o,i)=>{let a=(e%l/l+i/n.total)%1/.7-.15;o.el.style.setProperty("--progress",String(a))})})}setPoints(){const{bounding:t}=this;this.points=[];const s=24,e=Math.ceil(t.width*1.2/s),n=Math.ceil(t.height*1.2/s),h=(t.width-e*s)*.5,l=(t.height-n*s)*.5,o=t.width*.5,i=t.height*.5;for(let a=0;a<e;a++)for(let u=0;u<n;u++){const r=a*s+h,c=u*s+l,g=o-r,f=i-c;this.points.push({x:r,y:c,dx:g,dy:f,m:Math.random(),flowX:0})}}movePoints(){const{points:t,animationProgress:s}=this;t.forEach(e=>{e.flowX=s*-.05%24})}drawPoints(){const{bounding:t,ctx:s,points:e,animationProgress:n,pointsProgress:h,last:l}=this,o=Math.round(n*100)/100,i=Math.round(h*100)/100;i===l.pointsProgress&&o===l.animationProgress||(s.clearRect(0,0,t.width,t.height),s.beginPath(),e.forEach(a=>{const u=a.x+a.dx*(1-h)*.2+a.flowX,r=a.y+a.dy*(1-h)*.2;s.rect(u,r,.5,.5)}),s.stroke(),l.pointsProgress=i,l.animationProgress=o)}tick(){this.scrollProgress=Math.max(Math.min(1,T.positionInViewport(this.el,"top")),0)*-1+(1-Math.max(Math.min(1,T.positionInViewport(this.el,"bottom")),0)),this.smoothScrollProgress+=(this.scrollProgress-this.smoothScrollProgress)*.1,this.el.style.setProperty("--scroll-progress",String(this.scrollProgress)),this.movePoints(),this.moveLetters(),this.drawPoints()}}new B;
