import{S as L,E as b,T as q}from"./ScrollTrigger.-GiUncv5.js";import{g as j}from"./index.Bc2aDPd5.js";/*!
 * EasePack 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var p,M,z=function(){return p||typeof window<"u"&&(p=window.gsap)&&p.registerPlugin&&p},I=function(t,s){return!!(typeof t>"u"?s:t&&!~(t+"").indexOf("false"))},B=function(t){if(p=t||z(),p){M=p.registerEase;var s=p.parseEase(),e=function(l){return function(o){var i=.5+o/2;l.config=function(a){return l(2*(1-a)*a*i+a*a)}}},r;for(r in s)s[r].config||e(s[r]);M("slow",P),M("expoScale",C),M("rough",E);for(r in $)r!=="version"&&p.core.globals(r,$[r])}},R=function(t,s,e){t=Math.min(1,t||.7);var r=t<1?s||s===0?s:.7:0,h=(1-t)/2,l=h+t,o=I(e);return function(i){var a=i+(.5-i)*r;return i<h?o?1-(i=1-i/h)*i:a-(i=1-i/h)*i*i*i*a:i>l?o?i===1?0:1-(i=(i-l)/h)*i:a+(i-a)*(i=(i-l)/h)*i*i*i:o?1:a}},W=function(t,s,e){var r=Math.log(s/t),h=s-t;return e&&(e=p.parseEase(e)),function(l){return(t*Math.exp(r*(e?e(l):l))-t)/h}},T=function(t,s,e){this.t=t,this.v=s,e&&(this.next=e,e.prev=this,this.c=e.v-s,this.gap=e.t-t)},O=function(t){typeof t!="object"&&(t={points:+t||20});for(var s=t.taper||"none",e=[],r=0,h=(+t.points||20)|0,l=h,o=I(t.randomize,!0),i=I(t.clamp),a=p?p.parseEase(t.template):0,u=(+t.strength||1)*.4,n,c,g,f,m,w,v;--l>-1;)n=o?Math.random():1/h*l,c=a?a(n):n,s==="none"?g=u:s==="out"?(f=1-n,g=f*f*u):s==="in"?g=n*n*u:n<.5?(f=n*2,g=f*f*.5*u):(f=(1-n)*2,g=f*f*.5*u),o?c+=Math.random()*g-g*.5:l%2?c+=g*.5:c-=g*.5,i&&(c>1?c=1:c<0&&(c=0)),e[r++]={x:n,y:c};for(e.sort(function(x,d){return x.x-d.x}),w=new T(1,1,null),l=h;l--;)m=e[l],w=new T(m.x,m.y,w);return v=new T(0,0,w.t?w:w.next),function(x){var d=v;if(x>d.t){for(;d.next&&x>=d.t;)d=d.next;d=d.prev}else for(;d.prev&&x<=d.t;)d=d.prev;return v=d,d.v+(x-d.t)/d.gap*d.c}},P=R(.7);P.ease=P;P.config=R;var C=W(1,2);C.config=W;var E=O();E.ease=E;E.config=O;var $={SlowMo:P,RoughEase:E,ExpoScaleEase:C};for(var A in $)$[A].register=B,$[A].version="3.14.2";z()&&p.registerPlugin(P);j.registerPlugin(L,P);class V{el;container;ruler;scene;canvas;ctx;title;videos;mask;bounding;letters;works;points;tl;animationProgress;pointsProgress;last;scrollProgress;smoothScrollProgress;state;speed;isPaused;loadIsStarted;constructor(){this.el=document.querySelector(".s-work"),this.container=this.el.querySelector(".js-container"),this.ruler=this.el.querySelector(".js-ruler"),this.scene=this.container.querySelector(".js-scene"),this.canvas=this.container.querySelector(".js-canvas"),this.ctx=this.canvas.getContext("2d"),this.title=this.container.querySelector(".js-title"),this.videos=this.container.querySelectorAll("video"),this.mask={width:0,height:0,maxScale:1,lines:[],el:this.el.querySelector(".js-mask"),svg:this.el.querySelector(".js-mask-svg"),pathOuter:this.el.querySelector(".js-mask-path-outer"),pathInner:this.el.querySelector(".js-mask-path-inner"),pathLines:this.el.querySelector(".js-mask-path-lines")},this.letters=[],this.title.querySelectorAll(".js-letter").forEach(s=>{const e={el:s,ghosts:[]};this.letters.push(e)}),this.works=[],this.container.querySelectorAll(".js-work").forEach(s=>{const e={el:s};this.works.push(e)}),this.points=[],this.scrollProgress=0,this.smoothScrollProgress=0,this.last={animationProgress:0,pointsProgress:0},this.isPaused=!0,this.loadIsStarted=!1;const t=()=>{console.log("SWork initializing, measuring letters..."),document.readyState==="complete"?q.nextTick(this.init,this):b.once("siteLoaded",this.init,this)};document.fonts&&document.fonts.ready?document.fonts.ready.then(t).catch(t):setTimeout(t,500)}init(){this.setCtxStyle(),this.setSize(),this.setMask(),this.setPoints(),this.setLetters(),this.setWorks(),this.setTimeline(),this.bindEvents(),L.refresh(),this.tick(),document.documentElement.classList.add("is-works-ready"),b.emit("worksReady")}bindEvents(){b.on("contrastchange",this.setCtxStyle,this),b.on("resize",this.onResize,this),this.el.addEventListener("intersect",this.onIntersect.bind(this),{passive:!0}),this.syncIntersectState(),!this.loadIsStarted&&!this.isPaused&&(this.loadNextVideo(),this.loadIsStarted=!0)}syncIntersectState(){const t=this.el.getBoundingClientRect(),s=t.bottom>0&&t.top<window.innerHeight;this.setPausedState(!s)}setPausedState(t){this.isPaused!==t&&(this.isPaused=t,this.isPaused?b.off("tick",this.tick,this):b.on("tick",this.tick,this))}onResize(t){t&&(this.setCtxStyle(),this.setSize(),this.setMask(),this.setPoints(),this.setLetters(),this.setWorks(),this.setTimeline())}onIntersect(t){this.setPausedState(!t.detail.isIntersecting),this.loadIsStarted||(this.loadNextVideo(),this.loadIsStarted=!0)}setCtxStyle(){const t=getComputedStyle(this.el).getPropertyValue("--color-primary");q.nextTick(()=>{this.ctx.strokeStyle=t})}setSize(){this.el.style.setProperty("--height",this.works.length*50+"lvh");const t=this.container.getBoundingClientRect();this.bounding={left:t.left,top:t.top,width:window.safeWidth,height:window.safeHeight},this.canvas.width=this.bounding.width,this.canvas.height=this.bounding.height,this.speed=Math.hypot(this.bounding.width,this.bounding.height)*4}setMask(){const{mask:t}=this,s=t.el.clientWidth,e=t.el.clientHeight;t.width=s,t.height=e,t.svg.style.width=t.width+"px",t.svg.style.height=t.height+"px";const r=this.el.getBoundingClientRect(),h=this.ruler.getBoundingClientRect(),l=h.width,o=h.height,i=h.left-r.left,a=h.top-r.top,u=`M -1 0 L ${s+2} 0 L ${s+2} ${e} L -1 ${e} Z`,n={tl:{x:i,y:a},tr:{x:i+l,y:a},br:{x:i+l,y:a+o},bl:{x:i,y:a+o}};let c=(n.tr.x-n.tl.x)/2;t.maxScale=window.safeWidth/c;let g=`M ${n.tl.x} ${n.tl.y+c} A ${c} ${c} 0 0 1 ${n.tr.x} ${n.tr.y+c} L ${n.br.x} ${n.br.y-c} A ${c} ${c} 0 0 1 ${n.bl.x} ${n.bl.y-c} Z`;const f=`${u} ${g}`;t.pathOuter.setAttribute("d",`${u} ${g}`);const m=window.safeWidth>767?16:8;n.tl.x+=m,n.tl.y+=m,n.tr.x-=m,n.tr.y+=m,n.br.x-=m,n.br.y-=m,n.bl.x+=m,n.bl.y-=m,c=(n.tr.x-n.tl.x)/2,g=`M ${n.tl.x} ${n.tl.y+c} A ${c} ${c} 0 0 1 ${n.tr.x} ${n.tr.y+c} L ${n.br.x} ${n.br.y-c} A ${c} ${c} 0 0 1 ${n.bl.x} ${n.bl.y-c} Z`,t.pathInner.setAttribute("d",`${u} ${g}`),t.lines=[];const w=window.safeWidth>767?12:8,v=s/w,x=e*.1,d=Math.ceil(e/x);for(let y=1;y<w;y++){const k=v*y;t.lines.push({p1:{x:k,y:0},p2:{x:k,y:e}})}for(let y=0;y<d;y++){const k=x*y;t.lines.push({p1:{x:0,y:k},p2:{x:s,y:k}})}let _="";t.lines.forEach(y=>{_+=`M ${y.p1.x} ${y.p1.y} L ${y.p2.x} ${y.p2.y} `}),t.pathLines.setAttribute("d",_),t.pathLines.style.clipPath=`path(evenodd, '${f}')`}setLetters(){const{letters:t,scene:s}=this;t.forEach((e,r)=>{e.ghosts.forEach(o=>{o.el.remove()}),e.ghosts=[];const h=e.el.getBoundingClientRect();e.width=h.width,e.height=h.height,e.top=h.top-this.bounding.top,e.left=h.left,e.freq=1+Math.random();const l=window.safeWidth>767?.75:.5;e.total=Math.round(this.bounding.width/e.width*l)+2;for(let o=0;o<e.total;o++){const i=document.createElement("span");i.classList.add("s__scene__letter"),i.classList.add("js-letter"),i.innerText=e.el.innerText,i.dataset.letter=e.el.innerText,s.appendChild(i);const a={el:i,x:e.left,y:e.top,z:Math.random()*100,i:o-e.total*.5,p:(o/e.total-.5)*2,ap:Math.abs(o/e.total-.5)*2,mx:0,my:0};i.style.top=a.y+"px",i.style.left=a.x+"px",i.style.zIndex=String(r!==1&&r!==2&&(r+t.length+o)%5===0?3:1),i.style.setProperty("--ix",String(a.i)),i.style.setProperty("--iy",String(((r+1)/(t.length+1)-.5)*2)),i.style.setProperty("--ap",String(a.ap)),i.style.setProperty("--p",String(a.p)),e.ghosts.push(a)}})}setWorks(){const{works:t}=this;t.forEach((s,e)=>{const r=s.el;r.style.setProperty("--size",String(.5+Math.random()*.5)),r.style.setProperty("--y",String((.5+Math.random()*.5)*(e%2?-1:1)))})}setTimeline(){const{el:t,container:s,works:e,scene:r,mask:h}=this,l=e.map(i=>i.el);let{tl:o}=this;o&&o.kill(),o=j.timeline({scrollTrigger:{trigger:t,start:"top 25%",end:"bottom 75%",scrub:1},onUpdate:()=>{r.style.setProperty("--state",String(this.state))}}),o.fromTo(h.el,{scale:1},{scale:h.maxScale,duration:.75,ease:"power4.in"},0),o.fromTo(r,{scale:.75},{scale:1,duration:.75,ease:"power3.in"},0),o.fromTo(s,{clipPath:"inset(0 1rem)"},{clipPath:"inset(0 0rem)",duration:.75,ease:"power3.in"},0),o.fromTo(this,{pointsProgress:0},{pointsProgress:1,duration:1,ease:"power4.inOut"},0),o.fromTo(this,{state:0},{state:1,duration:.75,ease:"power4.in"},0),o.fromTo(l,{attr:{progress:1}},{attr:{progress:-1},ease:"slow(0.15, 0.6)",stagger:.25},.75),o.fromTo(this,{animationProgress:0},{animationProgress:1e4,duration:o.totalDuration(),ease:"power1.out"},.75),o.fromTo(this,{state:1},{state:0,duration:.75,ease:"power4.inOut",immediateRender:!1},"-=1"),o.fromTo(h.el,{scale:h.maxScale},{scale:1,duration:.75,ease:"power4.inOut",immediateRender:!1},"-=1"),o.fromTo(r,{scale:1},{scale:.75,duration:.75,ease:"power3.inOut",immediateRender:!1},"-=1"),o.fromTo(s,{clipPath:"inset(0 0rem)"},{clipPath:"inset(0 1rem)",duration:.75,ease:"power3.inOut",immediateRender:!1},"-=1"),o.fromTo(this,{pointsProgress:1},{pointsProgress:0,duration:1,ease:"power4.inOut"},"-=1")}loadNextVideo(){const t=Array.from(this.videos).find(s=>!s.classList.contains("is-loaded"));t&&(t.readyState>=3?this.videoLoaded(t):(t.addEventListener("canplaythrough",()=>{this.videoLoaded(t)},{once:!0}),t.setAttribute("src",t.getAttribute("data-src")),t.load()))}videoLoaded(t){t.classList.add("is-loaded"),this.loadNextVideo()}moveLetters(){const{speed:t,letters:s,animationProgress:e}=this;s.forEach((r,h)=>{const l=t*r.freq;r.ghosts.forEach((o,i)=>{let a=(e%l/l+i/r.total)%1/.7-.15;o.el.style.setProperty("--progress",String(a))})})}setPoints(){const{bounding:t}=this;this.points=[];const s=24,e=Math.ceil(t.width*1.2/s),r=Math.ceil(t.height*1.2/s),h=(t.width-e*s)*.5,l=(t.height-r*s)*.5,o=t.width*.5,i=t.height*.5;for(let a=0;a<e;a++)for(let u=0;u<r;u++){const n=a*s+h,c=u*s+l,g=o-n,f=i-c;this.points.push({x:n,y:c,dx:g,dy:f,m:Math.random(),flowX:0})}}movePoints(){const{points:t,animationProgress:s}=this;t.forEach(e=>{e.flowX=s*-.05%24})}drawPoints(){const{bounding:t,ctx:s,points:e,animationProgress:r,pointsProgress:h,last:l}=this,o=Math.round(r*100)/100,i=Math.round(h*100)/100;i===l.pointsProgress&&o===l.animationProgress||(s.clearRect(0,0,t.width,t.height),s.beginPath(),e.forEach(a=>{const u=a.x+a.dx*(1-h)*.2+a.flowX,n=a.y+a.dy*(1-h)*.2;s.rect(u,n,.5,.5)}),s.stroke(),l.pointsProgress=i,l.animationProgress=o)}tick(){this.scrollProgress=Math.max(Math.min(1,L.positionInViewport(this.el,"top")),0)*-1+(1-Math.max(Math.min(1,L.positionInViewport(this.el,"bottom")),0)),this.smoothScrollProgress+=(this.scrollProgress-this.smoothScrollProgress)*.1,this.el.style.setProperty("--scroll-progress",String(this.scrollProgress)),this.movePoints(),this.moveLetters(),this.drawPoints()}}new V;
